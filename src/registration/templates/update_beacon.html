{% extends "base_site.html" %}

{% block sidebar %}
  <div class="nav_sidebar_hidden col-md-3 left_col {% block sidebar_class %} {% endblock sidebar_class %}">
    {% include "site_template/sidebar_registration.html" %}
  </div>
{% endblock sidebar %}

{% block title %} Update Beacon {% endblock title %}

{% block content %}
  <div id="scroll-style-hidden" class="right_col" role="main">
    <div class="">

      <div class="row">  <!-- Start row -->
        <div class="col-md-12 col-sm-12 col-xs-12">
          <div class="x_panel tile">  <!-- start x_panel -->

            <div class="x_title">
              <div class="x_title_left_div">
                <h3>Beacon</h3>
              </div>
              <div class="clearfix"></div>
            </div>


            <div class="x_content">  <!-- start x_content -->

              <form id="hook" action="/registration/beacon/{{ beacon.id}}/update"
                class="form-horizontal form-label-left" method="post">
                <div class="col-md-9">
                  <br>
                  <div class="item form-group">
                    <label class="control-label col-md-4" for="name">Name
                    </label>
                    <div class="col-md-8">
                      <input type="text" id="name" name="name" value="{{ beacon.name }}"
                          class="form-control col-md-6 col-xs-6" maxlength="16">
                    </div>
                  </div>
                  <div class="item form-group">
                    <label class="control-label col-md-4">Category
                    </label>
                    <div class="col-md-8">
                      <select id="kind" name="kind" class="form-control">
                        {% for k, v in category.items() %}
                          {% if k == beacon.tags[0] %}
                            <option id="{{ k }}" value="{{ k }}" selected>{{ v }}</option>
                          {% else %}
                            <option id="{{ k }}" value="{{ k }}">{{ v }}</option>
                          {% endif %}
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <div class="item form-group">
                    <label class="control-label col-md-4">IPCAM
                    </label>
                    <div class="col-md-8">
                      <select id="ipcam" name="ipcam" class="form-control">
                        <option id="" value="">None</option>
                        {% for ipcam in ipcam_list %}
                          {% if ipcam.tags[0] == "2" %} <!-- 2 is Equipment type -->
                            {% if 'ipcamId' in beacon.custom %}
                              {% if beacon.custom.ipcamId == ipcam.id %}
                                <option id="{{ ipcam.id }}" value="{{ ipcam.id }}" selected>{{ ipcam.name }}</option>
                              {% else %}
                                <option id="{{ ipcam.id }}" value="{{ ipcam.id }}">{{ ipcam.name }}</option>
                              {% endif %}
                            {% else %}
                              <option id="{{ ipcam.id }}" value="{{ ipcam.id }}">{{ ipcam.name }}</option>
                            {% endif %}
                          {% endif %}
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <div class="item form-group">
                    <label class="control-label col-md-4">MOI
                    </label>
                    <div class="col-md-8">
                      <select id="moi" name="moi" class="form-control">
                        {% if 'is_visible_moi' in beacon.custom %}
                          {% if beacon.custom.is_visible_moi %}
                            <option id="1" value="1" selected>ON</option>
                            <option id="0" value="0">OFF</option>
                          {% else %}
                            <option id="1" value="1">ON</option>
                            <option id="0" value="0" selected>OFF</option>
                          {% endif %}
                        {% else %}
                          <option id="1" value="1">ON</option>
                          <option id="0" value="0" selected>OFF</option>
                        {% endif %}
                      </select>
                    </div>
                  </div>
                  <br>
                  <input type="hidden" id="hid" name="hid" value="{{ beacon.hub_id }}"
                      class="form-control col-md-6 col-xs-6">
                  <div style="text-align: right">
                    <button type="submit" class="btn btn-default">Update</button>
                  </div>
                </div>
              </form>

            </div>  <!-- End x_content -->

          </div>  <!-- End x_panel -->
        </div>
      </div>  <!-- End row-->

    </div>
  </div>

{% endblock content %}
